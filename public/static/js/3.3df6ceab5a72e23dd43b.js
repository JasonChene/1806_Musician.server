webpackJsonp([3],{Pl0U:function(e,t,r){var n=r("jE/M");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r("rjj0")("081c0687",n,!0)},d1Qo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("vMJZ"),o={data:function(){var e=function(e,t,r){return/^1[0-9]{10}$/.test(t)?11!==t.toString().length?r(new Error("电话号码必须是11位数字")):void r():r(new Error("请输入正确格式的电话号码"))};return{ruleForm:{username:"",phone:"",type:"teacher"},ruleFormByQuery:{phone:""},dataListLoading:!1,ruleForms:{username:[{required:!0,validator:function(e,t,r){t?/^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/.test(t)||t.length>0?r():r(new Error("姓名不能为空且只能是中英文或者数字")):r(new Error("请输入账号"))},trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}]},ruleFormsByQuery:{phone:[{required:!0,validator:e,trigger:"blur"}]},tableData:[]}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var e=this,t=this.ruleFormByQuery.phone;this.dataListLoading=!0,this.$store.dispatch("getDataList","teacher#"+t).then(function(t){e.dataListLoading=!1,e.tableData=t}).catch(function(t){e.dataListLoading=!1,console.log(t)})},onSubmit:function(){console.log("submit!")},onSubmitByAdd:function(){var e=this,t=this;this.$refs.ruleForm.validate(function(r){if(!r)return console.log("error submit!!"),!1;e.loading=!0,Object(n.a)(e.ruleForm).then(function(r){e.loading=!1,setTimeout(t.getDataList(),2e3)},function(e){console.log(e)}).catch(function(){e.loading=!1})})},onSubmitByQuery:function(){var e=this;this.$refs.ruleFormByQuery.validate(function(t){t&&e.getDataList().then(function(t){e.$emit("refreshDataList")})})},onSubmitByQueryAll:function(){this.ruleFormByQuery.phone="",this.getDataList()}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout"},[r("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm,rules:e.ruleForms}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"姓名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitByAdd}},[e._v("添加")])],1)],1),e._v(" "),r("el-form",{ref:"ruleFormByQuery",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleFormByQuery,rules:e.ruleFormsByQuery}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"手机号"},model:{value:e.ruleFormByQuery.phone,callback:function(t){e.$set(e.ruleFormByQuery,"phone",t)},expression:"ruleFormByQuery.phone"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitByQuery}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitByQueryAll}},[e._v("显示所有")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"phone",label:"手机"}})],1)],1)},staticRenderFns:[]};var i=r("VU/8")(o,a,!1,function(e){r("Pl0U")},"data-v-551d2610",null);t.default=i.exports},"jE/M":function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.layout[data-v-551d2610] {\n  padding: 20px 20px;\n  margin-right: 30%;\n}\n",""])},vMJZ:function(e,t,r){"use strict";t.a=function(e){var t=e.username,r=e.phone,o=e.type,i=new a.a.User;return i.set("username",t),i.set("password","123456"),i.set("mobilePhoneNumber",r),i.save().then(function(e){var t={userId:e.id,role:o};return a.a.Cloud.run("setRole",t).then(function(e){console.log(e.status),200===e.status?Object(n.Message)({message:"用户添加成功",type:"success",duration:3e3}):Object(n.Message)({message:e.message||e.data,type:"error",duration:3e3})},function(e){console.log("用户角色添加失败",e)}),e},function(e){return e.toString().indexOf("Mobile phone number has already been taken")?Object(n.Message)({message:"手机号已被占用",type:"error",duration:3e3}):Object(n.Message)({message:"未知错误请联系管理员",type:"error",duration:3e3}),e}).catch(function(e){return e})};var n=r("zL8q"),o=(r.n(n),r("JnRc")),a=r.n(o)}});